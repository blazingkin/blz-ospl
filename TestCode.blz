:main
ECHO "hello world"
a = 1337
b = 1 + 3
c = a + b
arr[b] = 32
g[b] = b
ECHO "Do arrays work? " arr[b]
arr[3] = a
ECHO "Do arrays at constant indices work? " arr[3]
ECHO "Do nested array accessors work? " arr[g[b]]
ECHO "1337+4 = " c
ECHO "1337 = " a
SET *l {system.os.name}
ECHO {file.name} " <-file name, os-> " *l
ECHO a " and " c

(ECHO "1+2 = " (ADD 1 2))
(ECHO "4+(4+8) = " (ADD 4 (ADD 4 8)))
(DEFINE dbl (x) (ADD x x))
(ECHO "double 3 = " (dbl 3))
(DEFINE sqr (x) (MUL x x))
(ECHO "9 squared = " (sqr 9))
(DEFINE nested_mul (x y z) (MUL x (MUL y z)))
(ECHO "2*3*4 = " (nested_mul 2 3 4))
(DEFINE fact (x) (IF x==0 1 (MUL x (fact (SUB x 1)))))
(DEFINE curriedaddition (x) (DEFINE ca (y) (ADD x y)))
(ECHO "Does curried addition work? " ((curriedaddition 3) 6))
(DEFINE curriedmultiplication (x y) (DEFINE cm (z) (MUL x (MUL y z))))
(ECHO "Does curried multiplication work? " ((curriedmultiplication 3 4) 5))
(ECHO "Curried addition of 3 and 5: " (ca 5))
(ECHO "Factorial 7: " (fact 7))


SET loopCounter 0
WHILE loopCounter < 3
ECHO "looptest"
SET innerCounter 3
WHILE innerCounter >= 0
ECHO innerCounter
SUB innerCounter 1 innerCounter
ENDLOOP
ADD loopCounter 1 loopCounter
ENDLOOP

ECHO "Testing WAIT"
WAIT (nested_mul 10 6 10)
ECHO "Done testing WAIT"

ECHO (dbl 5) " THIS IS A TEST"
ECHO "Please enter three numbers"
NIN a
NIN b
(ECHO (IF a==b "Your inputs were the same!" "Your inputs were different!"))

NIN c
ECHO "The product of these numbers is " (nested_mul a b c)

RJP checkglobal

ADDPROCESS ExampleCode main

TENSORI ten 2

FOR i = 0, i<=20, i = i + 1
f = 2 * i
TENSORSET ten f i 0
ENDLOOP

RJP function_call_test (5, 6, 7)
RJP checkglobal

FOR i=0,i<=20, i = i + 2
TENSORGET ten i 0 g
ECHO g " is the " i "th index"
ENDLOOP


END


:function_call_test (a, b, c)
ECHO a ", " b ", and " c " were passed as variables"
a = a + 1
IF a < 20
RJP function_call_test (a b c)

END


:checkglobal

ECHO *l " should be your OS"

END